@prefix : <http://kairos.ai/ont/core#> .
@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

# Customer Shape
:CustomerShape a sh:NodeShape ;
    sh:targetClass :Customer ;
    sh:property [
        sh:path :customerId ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        sh:message "Customer must have exactly one customer ID." ;
    ] ;
    sh:property [
        sh:path :email ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        sh:pattern "^[\\w.%+-]+@[\\w.-]+\\.[A-Za-z]{2,}$" ;
        sh:message "Customer must have exactly one valid email address." ;
    ] ;
    sh:property [
        sh:path :name ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        sh:minLength 1 ;
        sh:message "Customer must have a name (at least 1 character)." ;
    ] .

# Order Shape
:OrderShape a sh:NodeShape ;
    sh:targetClass :Order ;
    sh:property [
        sh:path :orderId ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        sh:message "Order must have exactly one order ID." ;
    ] ;
    sh:property [
        sh:path :orderDate ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:date ;
        sh:message "Order must have exactly one order date." ;
    ] ;
    sh:property [
        sh:path :totalAmount ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:decimal ;
        sh:minInclusive 0.0 ;
        sh:message "Order must have a total amount (>= 0)." ;
    ] ;
    sh:property [
        sh:path :placedBy ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:class :Customer ;
        sh:message "Order must be placed by exactly one customer." ;
    ] .

# Product Shape
:ProductShape a sh:NodeShape ;
    sh:targetClass :Product ;
    sh:property [
        sh:path :productId ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        sh:message "Product must have exactly one product ID." ;
    ] ;
    sh:property [
        sh:path :name ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        sh:minLength 1 ;
        sh:message "Product must have a name (at least 1 character)." ;
    ] ;
    sh:property [
        sh:path :price ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:decimal ;
        sh:minInclusive 0.0 ;
        sh:message "Product must have a price (>= 0)." ;
    ] .
    
# Supplier Shape
:SupplierShape a sh:NodeShape ;
    sh:targetClass :Supplier ;
    sh:property [
        sh:path :supplierId ;
        sh:minCount 1 ;
        sh:maxCount 2 ;
        sh:datatype xsd:string ;
        sh:message "Supplier must have exactly one supplier ID." ;
    ] ;
    sh:property [
        sh:path :supplierName ;
        sh:minCount 1 ;
        sh:maxCount 1 ;
        sh:datatype xsd:string ;
        sh:minLength 1 ;
        sh:message "Supplier must have a name (at least 1 character)." ;
    ] .